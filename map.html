<!DOCTYPE html>
<html>
<head>
  <title>World Problem Explorer</title>

  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="A global innovation platform where real world problems are shown on a map and solved step by step through questioning, research, and solution design.">
  <meta name="keywords" content="innovation, problem solving, world problems, environment, research, solutions, students, social impact">
  <meta name="author" content="Yasir">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WV187TTWER"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WV187TTWER');
</script>
  <style>
    body {
      margin: 0;
      background: #0f172a;
      color: white;
      font-family: Arial, sans-serif;
    }

    #map {
      height: 100vh;
    }

  .label {
  background: rgba(0,0,0,0.85);
  padding: 3px 6px;
  border-radius: 6px;
  color: #f8fafc;
  font-size: 12px;
}


    /* FILTER PANEL */
    #filterPanel {
      position: fixed;
      top: 14px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 9999;
    }

.filterCard {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 10px 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  box-shadow: 0 6px 22px rgba(0,0,0,0.35);
  transition: transform 0.25s, box-shadow 0.25s, opacity 0.25s;
  user-select: none;
  opacity: 0.7;

  color: #020617;   /* ‚úÖ BLACK TEXT */
}



    .filterCard span {
      font-size: 13px;
      opacity: 0.9;
    }

    .filterCard:hover {
      transform: translateY(-2px);
    }

    .filterCard.active {
  opacity: 1;
  font-weight: bold;
}


    .environmental:hover { box-shadow: 0 0 18px rgba(34,197,94,0.6); }
    .medical:hover { box-shadow: 0 0 18px rgba(239,68,68,0.6); }
    .urban:hover { box-shadow: 0 0 18px rgba(59,130,246,0.6); }
    .science:hover { box-shadow: 0 0 18px rgba(168,85,247,0.6); }

/* THREE DOT */
#menuDot {
  position: fixed;
  top: 16px;
  right: 16px;
  font-size: 22px;
  cursor: pointer;
  z-index: 10001;
  padding: 6px 10px;
  border-radius: 8px;
  color: #070f1f;
}

#menuDot:hover {
  background: rgba(255,255,255,0.08);
}

/* LEFT SLIDE MENU */
#sideMenu {
  position: fixed;
  top: 0;
  left: -260px;
  width: 240px;
  height: 100vh;
  background: #020617;
  padding: 20px 16px;
  transition: left 0.35s ease;
  z-index: 10000;
  box-shadow: 8px 0 30px rgba(0,0,0,0.6);
}

#sideMenu.open {
  left: 0;
}

/* HEADER */
.menuHeader {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

#menuAvatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #38bdf8;
}

.menuName {
  font-size: 15px;
  font-weight: bold;
}

.menuSub {
  font-size: 12px;
  opacity: 0.7;
}

/* ITEMS */
.menuItem {
  padding: 12px 10px;
  font-size: 14px;
  border-radius: 10px;
  cursor: pointer;
  margin-bottom: 6px;
  transition: background 0.25s;
}

.menuItem:hover {
  background: rgba(255,255,255,0.06);
}

.menuItem.logout {
  color: #ef4444;
}

  </style>
</head>

<body>

<!-- THREE DOT ICON -->
<div id="menuDot" onclick="toggleMenu()">‚ãÆ</div>

<!-- LEFT SIDE MENU -->
<div id="sideMenu">
  <div class="menuHeader">
    <img id="menuAvatar" src="images/default-user.png">
    <div>
      <div class="menuName" id="menuUserName">Hi, Innovator</div>
      <div class="menuSub">Innsoworld</div>
    </div>
  </div>

  <div class="menuItem" onclick="goSolutions()">üí° My Solutions</div>
  <div class="menuItem" onclick="goPrototypes()">üõ† My Prototypes</div>
  <div class="menuItem" onclick="goPitches()">üìÑ My Pitches</div>
  <div class="menuItem" onclick="goJourney()">üß≠ My Journey</div>
  <div class="menuItem" onclick="goHow()">‚ÑπÔ∏è How Innsoworld Works</div>

  <div class="menuItem logout" onclick="logout()">‚èª Logout</div>
</div>


<!-- FILTER UI -->
<div id="filterPanel">
  <div class="filterCard active" onclick="applyFilter('all', this)">üåç <span>All</span></div>
  <div class="filterCard environmental" onclick="applyFilter('environmental', this)">üå± <span>Environmental</span></div>
  <div class="filterCard medical" onclick="applyFilter('medical', this)">üß† <span>Medical</span></div>
  <div class="filterCard urban" onclick="applyFilter('urban', this)">üèôÔ∏è <span>Urban</span></div>
  <div class="filterCard science" onclick="applyFilter('science', this)">üî¨ <span>Science</span></div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="problems.js"></script>


<script>
 
  const map = L.map("map").setView([20, 0], 2);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

  let markers = [];

  function showProblems(filter) {
    markers.forEach(m => map.removeLayer(m));
    markers = [];

    Object.keys(PROBLEMS).forEach(id => {
      const p = PROBLEMS[id];

      if (filter !== "all" && p.category !== filter) return;

      const marker = L.marker([p.lat, p.lng]).addTo(map);
      marker.bindTooltip(p.title, { permanent: true, className: "label" });
      marker.on("click", () => location.href = "problem.html?id=" + id);

      markers.push(marker);
    });
  }

  function applyFilter(type, el) {
    document.querySelectorAll(".filterCard").forEach(c => c.classList.remove("active"));
    el.classList.add("active");
    showProblems(type);
  }

  showProblems("all");

  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("keydown", e => {
    if (e.ctrlKey && (e.key === "u" || e.key === "s" || e.key === "c")) {
      e.preventDefault();
    }
  });
</script>

<script>
const sideMenu = document.getElementById("sideMenu");

function toggleMenu() {
  sideMenu.classList.toggle("open");
}

// close when clicking outside
document.addEventListener("click", (e) => {
  if (!sideMenu.contains(e.target) && e.target.id !== "menuDot") {
    sideMenu.classList.remove("open");
  }
});

// navigation
function goSolutions() { location.href = "my-solutions.html"; }
function goPrototypes() { location.href = "my-prototypes.html"; }
function goPitches() { location.href = "my-pitches.html"; }
function goJourney() { location.href = "journey.html"; }
function goHow() { location.href = "about.html"; }

function logout() {
  localStorage.clear();
  location.href = "login.html";
}

// load user info
const user = JSON.parse(localStorage.getItem("user"));
if (user) {
  document.getElementById("menuUserName").innerText = "Hi, " + user.name;
  if (user.photo) document.getElementById("menuAvatar").src = user.photo;
}
</script>



</body>
</html>

